# üìÖ Tool de Agendamento com Cal.com (via N8N)

Este workflow automatiza completamente o processo de agendamento, listagem de hor√°rios dispon√≠veis, e cancelamento de reuni√µes utilizando a API da [Cal.com](https://cal.com), tudo integrado com o N8N.

---

## üíº Aplica√ß√£o

- Ideal para empresas ou consultores que precisam:
  - Marcar reuni√µes com base em disponibilidade real
  - Retornar mensagens din√¢micas ao usu√°rio (sucesso ou erro)
  - Cancelar agendamentos de forma automatizada
- Pode ser usado em bots, landing pages, CRMs ou ferramentas internas

---

## ‚öôÔ∏è O que esse workflow faz

### Agendamento:
1. Recebe dados do cliente via Webhook (email, data)
2. Tenta criar o agendamento via Cal.com
3. Se o hor√°rio estiver livre:
   - Reserva o slot e retorna os dados do agendamento (UID + link)
4. Se o hor√°rio estiver ocupado:
   - Retorna lista de hor√°rios alternativos dispon√≠veis, formatada automaticamente

### Cancelamento:
1. Recebe UID via Webhook
2. Chama endpoint de cancelamento da Cal.com
3. Retorna mensagem confirmando o cancelamento com data/hora

---

## üß© N√≥s utilizados no fluxo

| Nome do N√≥                         | Fun√ß√£o                                                                |
|------------------------------------|-----------------------------------------------------------------------|
| **Webhook (POST)**                 | Recebe requisi√ß√£o para marcar agendamento                             |
| **Tenta Criar Agendamento**        | Faz o POST para criar o agendamento via API Cal.com                   |
| **Reserva Slot com Agendamento**   | Reserva o hor√°rio ap√≥s criar o agendamento                            |
| **Retorna Sucesso no Agendamento** | Retorna UID e link de reuni√£o ao cliente                              |
| **Lista Slots Dispon√≠veis**        | Retorna lista de hor√°rios alternativos (caso conflito)                |
| **Formata Slots**                  | Formata a lista de hor√°rios em string com datas/hor√°rios leg√≠veis     |
| **Retorna Slots Dispon√≠veis**      | Envia ao cliente a lista de hor√°rios dispon√≠veis                      |
| **Webhook (DELETE)**               | Recebe requisi√ß√£o para cancelar agendamento                           |
| **Desmarca o Agendamento**         | Executa o cancelamento usando o UID fornecido                         |
| **Retorna Sucesso ao Desmarcar**   | Confirma o cancelamento ao cliente                                    |

---

## üîÅ Demonstra√ß√£o visual do fluxo

![Fluxo de Agendamento N8N](./75ab522e-c315-4ed5-9383-13ea2d74cbf9.png)

---

## üìé Download do Workflow

üì• [`Tool - Agendamento.json`](./Tool%20-%20Agendamento.json)

---

## üì¶ APIs utilizadas

- **[Cal.com API v2](https://docs.cal.com/reference/bookings-createbooking)**:
  - `/bookings` para cria√ß√£o
  - `/slots/available` para consultar hor√°rios
  - `/bookings/{uid}/cancel` para cancelamento

---

## üí° Destaques T√©cnicos

- Utiliza o recurso `Set` para formatar hor√°rios leg√≠veis ao usu√°rio
- Express√µes avan√ßadas com `.toDateTime().toLocal().format()` para exibir datas corretamente
- L√≥gica condicional para retorno din√¢mico com base no sucesso ou falha de agendamento

---

## üë§ Autor

Criado por [Miguel Augusto](https://www.linkedin.com/in/miguel-augusto-32356b120/)

üîó Conecte-se comigo no LinkedIn para ver mais automa√ß√µes com N8N, WhatsApp, CRMs e IA!

---

## üè∑Ô∏è Tags

`#n8n` `#cal.com` `#automa√ß√£o` `#agendamento` `#api` `#lowcode`
